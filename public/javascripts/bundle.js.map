{"version":3,"sources":["webpack:///webpack/bootstrap 90b24d328946d3a52c4f","webpack:///./public/javascripts/api.js"],"names":["genreQuery","data","$","ajax","method","url","subGenreQuery","localStorage","removeItem","genreColors","genreButtonClick","genre","clicked","startYear","endYear","writeGraph","then","response","setItem","JSON","stringify","error","console","log","startYearUpdate","year","val","parseInt","endYearUpdate","clearChart","remove","isButtonClicked","buttonId","document","getElementById","checked","margin","top","right","bottom","left","w","h","xScale","d3","scaleTime","rangeRound","yScale","scaleLinear","line","x","d","y","parseDate","timeParse","formatData","keys","Object","sort","filteredData","filter","key","formattedData","map","GenerateLeftAxis","scale","leftAxis","axisLeft","GenerateBottomAxis","bottomAxis","axisBottom","getMaxRelease","genres","storage","topReleasesPerGenre","forEach","push","max","values","localData","minYear","maxYear","globalData","parse","maxNumOfReleases","domain","svg","select","append","attr","call","text","subGenreObject","genreName","formattedDataset","length","style","dataset","prefetchData1","prefetchFunk","value","prefetchPop","prefetchData2"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 90b24d328946d3a52c4f","const genreQuery = (data) => {\n  return $.ajax({\n    method: \"GET\",\n    url: \"api/genreQuery\",\n    data: data\n  });\n};\n\nconst subGenreQuery = (data) => {\n  localStorage.removeItem(\"subgenre\");\n  return $.ajax({\n    method: \"GET\",\n    url: \"api/subGenreQuery\",\n    data: data\n  });\n};\n\nconst genreColors = {\n\"rock\": \"#8ce196\",\n\"pop\": \"steelblue\",\n\"hip-hop\": \"purple\",\n\"funk-soul\": \"orange\",\n\"electronic\": \"green\",\n\"classical\": \"brown\",\n\"jazz\": \"red\",\n\"subgenre\": \"black\"\n};\n\nconst genreButtonClick = function (genre, clicked, startYear, endYear) {\nwriteGraph(localStorage, startYear, endYear);\nlet data = {'genre': genre, 'startYear': startYear, 'endYear': endYear};\ngenreQuery(data).then(\n  (response) => {\n    localStorage.setItem(genre, JSON.stringify(response[genre]));\n    writeGraph(localStorage, startYear, endYear);\n  },\n  (error) => console.log(error)\n);\n};\n\nconst startYearUpdate = (year) => {\n$('#startYearDisplay').val(year);\nif (year >= $('#endYearDisplay').val()) {\n$('#endYear').val(parseInt(year) + 1);\n$('#endYearDisplay').val(parseInt(year) + 1);\n}\n};\n\nconst endYearUpdate = (year) => {\n$('#endYearDisplay').val(year);\nif (year <= $('#startYearDisplay').val()) {\n$('#startYear').val(parseInt(year) - 1);\n$('#startYearDisplay').val(parseInt(year) - 1);\n}\n};\n\nconst clearChart = () => {\n$(\".graph\").remove();\n};\n\nconst isButtonClicked = (genre) => {\nconst buttonId = genre + \"-toggle\";\nreturn document.getElementById(buttonId).checked;\n};\n\nconst margin = {top: 30, right: 20, bottom: 30, left: 50};\nconst w = 1050 - margin.left - margin.right;\nconst h = 500 - margin.top - margin.bottom;\n\nconst xScale = d3.scaleTime()\n          .rangeRound([0, w - margin.left - margin.right]);\n\nconst yScale = d3.scaleLinear()\n          .rangeRound([h - margin.bottom - margin.top, 0]);\n\nconst line = d3.line()\n  .x(function(d) { return xScale(d[0]) })\n  .y(function(d) { return yScale(d[1]) });\n\nconst parseDate = d3.timeParse(\"%Y\");\n\nconst formatData = (genre, startYear, endYear) => {\nconst keys = Object.keys(genre).sort();\nlet filteredData = keys.filter((key) => {\nif (key >= startYear && key <= endYear) {\n  return true\n} else {\n  return false\n}\n})\nlet formattedData = filteredData.map( (key) => {\nreturn [parseDate(key), genre[key]] }\n);\nreturn formattedData;\n};\n\nconst GenerateLeftAxis = (scale) => {\nconst leftAxis = d3.axisLeft(scale);\nreturn leftAxis;\n};\n\nconst GenerateBottomAxis = (scale) => {\nconst bottomAxis = d3.axisBottom(scale)\nreturn bottomAxis;\n};\n\nconst getMaxRelease = (genres, storage) => {\nconst topReleasesPerGenre = [];\ngenres.forEach( (genre) => {\nif (genre === \"subgenre\") return\ntopReleasesPerGenre.push(d3.max(Object.values(storage[genre])));\n})\nreturn d3.max(topReleasesPerGenre);\n}\n\nconst writeGraph = (localData, minYear, maxYear) => {\nconst genres = Object.keys(localData);\nlet globalData = {};\ngenres.forEach( (genre) => {\nglobalData[genre] = JSON.parse(localData[genre]);\n});\n\nconst maxNumOfReleases = getMaxRelease(genres, globalData);\n\nxScale.domain([parseDate(minYear), parseDate(maxYear)]);\nyScale.domain([0, maxNumOfReleases]);\n\nconst leftAxis = GenerateLeftAxis(yScale);\nconst bottomAxis = GenerateBottomAxis(xScale);\n\nclearChart();\n\nlet svg = d3.select('#d3Graph').append(\"svg\")\n    .attr(\"class\", \"graph\")\n    .attr(\"width\", w + margin.left + margin.right)\n    .attr(\"height\", h + margin.top + margin.bottom);\n\n  svg.append(\"g\")\n    .attr(\"class\", \"axis\")\n    .attr(\"transform\", `translate(${margin.left}, ${margin.bottom})`)\n    .call(leftAxis)\n  .append(\"text\")\n    .attr(\"transform\", \"rotate(-90)\")\n    .attr(\"y\", 6)\n    .attr(\"dy\", \"0.71em\")\n    .attr(\"fill\", \"#000\")\n    .text(\"Number of Releases\");\n\n  svg.append(\"g\")\n  .attr(\"class\", \"axis\")\n    .attr(\"transform\", `translate(${margin.left}, ${h - margin.bottom})`)\n    .call(bottomAxis);\n\ngenres.forEach( (genre) => {\n  if (genre === 'subgenre') {\n    const subGenreObject = JSON.parse(localStorage[genre])\n    const genreName = Object.keys(subGenreObject)[0]\n    const formattedDataset = formatData(subGenreObject[genreName], minYear, maxYear)\n    if (formattedDataset.length === 0) { return }\n\n    svg.append(\"path\")\n      .attr(\"d\", line(formattedDataset))\n      .attr(\"stroke\", genreColors[genre])\n      .attr(\"stroke-width\", 2)\n      .attr(\"fill\", \"none\")\n      .attr(\"transform\", `translate(${margin.left}, ${margin.bottom})`)\n\n    svg.append(\"text\")\n    .attr(\"transform\", \"translate(\" + (w + 3) + \",\" + yScale(formattedDataset[formattedDataset.length - 1][1]) + \")\")\n    .attr(\"dy\", \"0.71em\")\n    .attr(\"class\", \"genreLabel\")\n    .style(\"fill\", \"black\")\n    .text(genreName);\n\n  } else if (!isButtonClicked(genre)) {\n    return\n  } else {\n  const dataset = JSON.parse(localStorage[genre])\n  const formattedDataset = formatData(dataset, minYear, maxYear)\n  if (formattedDataset.length === 0) { return }\n\n  svg.append(\"path\")\n    .attr(\"d\", line(formattedDataset))\n    .attr(\"stroke\", genreColors[genre])\n    .attr(\"stroke-width\", 2)\n    .attr(\"fill\", \"none\")\n    .attr(\"transform\", `translate(${margin.left}, ${margin.bottom})`)\n\n  svg.append(\"text\")\n    .attr(\"transform\", \"translate(\" + (w + 3) + \",\" + yScale(formattedDataset[formattedDataset.length - 1][1]) + \")\")\n    .attr(\"dy\", \"0.71em\")\n    .attr(\"class\", \"genreLabel\")\n    .style(\"fill\", genreColors[genre])\n    .text(genre);\n}}\n)\n}\n\nconst prefetchData1 = function () {\nlet data = {'genre': \"hip-hop\", 'startYear': 1970, 'endYear': 1985};\n    genreQuery(data).then(\n      (response) => {\n        localStorage.setItem(\"hip-hop\", JSON.stringify(response['hip-hop']));\n        let data = {'genre': \"electronic\", 'startYear': 1960, 'endYear': 2016};\n        genreQuery(data).then(\n          (response) => {\n            localStorage.setItem(\"electronic\", JSON.stringify(response['electronic']));\n          },\n          (error) => console.log(error)\n        );\n      },\n  (error) => console.log(error)\n  );\n};\n\nconst prefetchFunk = function () {\nlet data = {'genre': \"funk-soul\", 'startYear': 1970, 'endYear': 1985};\ngenreQuery(data).then(\n(response) => {\n  localStorage.setItem(\"funk-soul\", JSON.stringify(response['funk-soul']));\n  writeGraph(localStorage, startYear.value, endYear.value);\n},\n(error) => console.log(error)\n);\n};\n\nconst prefetchPop = function () {\nlet data = {'genre': \"pop\", 'startYear': 1970, 'endYear': 1985};\ngenreQuery(data).then(\n(response) => {\n  localStorage.setItem(\"pop\", JSON.stringify(response['pop']));\n  writeGraph(localStorage, startYear.value, endYear.value);\n},\n(error) => console.log(error)\n);\n};\n\n\nconst prefetchData2 = function () {\nlet data = {'genre': \"pop\", 'startYear': 1970, 'endYear': 1985};\ngenreQuery(data).then(\n  (response) => {\n    localStorage.setItem(\"pop\", JSON.stringify(response['pop']));\n    let data = {'genre': \"funk-soul\", 'startYear': 1970, 'endYear': 1985};\n    genreQuery(data).then(\n      (response) => {\n        localStorage.setItem(\"funk-soul\", JSON.stringify(response['funk-soul']));\n      },\n  (error) => console.log(error)\n  );\n  },\n(error) => console.log(error)\n);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/api.js"],"sourceRoot":""}